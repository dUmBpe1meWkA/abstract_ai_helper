SEGMENT_PROMPT = """Ты — строгий научный редактор. На входе стенограмма лекции (рус.).
Сделай краткий конспект в строгом Markdown-формате:
## <Краткий заголовок сегмента>
### Определения
- ...
### Утверждения/теоремы
- ...
### Выводы/следствия
- ...
### Примеры/замечания
- ...
Если встречаются пометки SPEAKER_0 — это преподаватель; SPEAKER_* ≠ 0 — студент.
Выделяй блоки:
### Вопросы студентов
- ...
### Ответы преподавателя
- ...
В конце добавь строку: ⏱ Диапазон: {t0}–{t1}
Не добавляй фактов, которых нет в тексте.

Текст сегмента:
\"\"\"{text}\"\"\""""

AGGREGATE_PROMPT = """Собери единый конспект лекции из набора мини-конспектов (Markdown).
Требования:
- Заголовок H1: тема лекции (кратко);
- Далее Автоматическое "Оглавление";
- Затем логичная структура: определения → теоремы → примеры → выводы;
- Отдельные разделы: "Вопросы студентов" и "Ответы преподавателя".
- Слей дубли, исправь противоречия, но не выдумывай.
- Сохрани чистый Markdown с якорями.

Мини-конспекты:
\"\"\"{mini_md}\"\"\""""

TOPICS_PROMPT = """Из нижеследующего конспекта (Markdown) извлеки 5 ключевых тем (однословные/краткие),
верни ТОЛЬКО JSON-массив строк без пояснений.
Конспект:
\"\"\"{md}\"\"\""""

ENRICH_PROMPT = """Ты дополняешь конспект лекции только на основе переданных выдержек-источников.
Для каждой темы составь пункт в разделе "Доп. материалы":
- 2–3 предложения уточнения/контекста;
- одна строка "Источник: <имя-файла или ссылка>".

Темы: {topics}
Источники (каждый блок в форме: [source] отрывок):
\"\"\"{snippets}\"\"\"

Собери раздел:
## Доп. материалы
- <тема 1>: ... Источник: ...
- <тема 2>: ... Источник: ...
...
Не выдумывай, используй только переданные выдержки.
"""
